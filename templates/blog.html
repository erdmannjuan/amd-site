{% extends "base.html" %}

{% block content %}
<!-- Page Hero -->
<section class="page-hero">
    <div class="container">
        <span class="section-label">{{ page.label or "Blog" }}</span>
        <h1 class="page-title">{{ page.hero_title or "Automation Insights" }}</h1>
        <p class="page-subtitle">{{ page.hero_subtitle or "Expert perspectives on manufacturing automation, robotics, and industry trends" }}</p>
    </div>
</section>

<!-- Category Filters -->
<section class="blog-filters-section">
    <div class="container">
        <div class="category-tabs">
            <a href="{{ config.site.base_path }}/blog/" class="category-tab{% if not page.current_category %} active{% endif %}">All</a>
            {% for category in categories|sort %}
            {% set cat_slug = category|lower|replace(' & ', '-')|replace(' ', '-') %}
            <a href="{{ config.site.base_path }}/blog/category/{{ cat_slug }}/" class="category-tab{% if page.current_category == category %} active{% endif %}">{{ category }}</a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Blog Grid -->
<section class="section blog-section">
    <div class="container">
        <div class="blog-grid" id="blog-grid">
            {% for post in posts %}
            <article class="blog-card" data-category="{{ post.category or '' }}" data-date="{{ post.date or '' }}" data-title="{{ post.title|lower }}" data-description="{{ post.description|lower }}">
                {% if post.image %}
                <div class="blog-card-image">
                    <img src="{{ config.site.base_path }}/static/images/{{ post.image }}" alt="{{ post.title }}" loading="lazy" width="800" height="450">
                </div>
                {% endif %}
                <div class="blog-card-body">
                    {% if post.category %}
                    <span class="blog-category">{{ post.category }}</span>
                    {% endif %}
                    <h2><a href="{{ config.site.base_path }}{{ post.url }}">{{ post.title }}</a></h2>
                    <p>{{ post.description }}</p>
                    <div class="blog-meta">
                        {% if post.author %}<span>{{ post.author }}</span>{% endif %}
                        {% if post.date %}<span>{{ post.date }}</span>{% endif %}
                        {% if post.read_time %}<span>{{ post.read_time }} min read</span>{% endif %}
                    </div>
                </div>
            </article>
            {% else %}
            <div class="blog-empty">
                <p>No blog posts yet. Check back soon for automation insights and industry updates.</p>
            </div>
            {% endfor %}
        </div>

        {% if pagination and pagination.total_pages > 1 %}
        <!-- Pagination -->
        <nav class="blog-pagination" aria-label="Blog pagination">
            {% if pagination.has_prev %}
            <a href="{{ config.site.base_path }}{{ pagination.prev_url }}" class="pagination-btn pagination-prev">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"/></svg>
                Previous
            </a>
            {% else %}
            <span class="pagination-btn pagination-prev disabled">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"/></svg>
                Previous
            </span>
            {% endif %}

            <div class="pagination-numbers">
                {% set base_url = pagination.base_url | default('/blog/') %}
                {% for page_num in pagination.pages %}
                    {% if page_num == pagination.current_page %}
                    <span class="pagination-num active">{{ page_num }}</span>
                    {% elif page_num == 1 %}
                    <a href="{{ config.site.base_path }}{{ base_url }}" class="pagination-num">{{ page_num }}</a>
                    {% elif page_num <= 3 or page_num > pagination.total_pages - 2 or (page_num >= pagination.current_page - 1 and page_num <= pagination.current_page + 1) %}
                    <a href="{{ config.site.base_path }}{{ base_url }}page/{{ page_num }}/" class="pagination-num">{{ page_num }}</a>
                    {% elif page_num == 4 and pagination.current_page > 5 %}
                    <span class="pagination-ellipsis">...</span>
                    {% elif page_num == pagination.total_pages - 2 and pagination.current_page < pagination.total_pages - 4 %}
                    <span class="pagination-ellipsis">...</span>
                    {% endif %}
                {% endfor %}
            </div>

            {% if pagination.has_next %}
            <a href="{{ config.site.base_path }}{{ pagination.next_url }}" class="pagination-btn pagination-next">
                Next
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,6 15,12 9,18"/></svg>
            </a>
            {% else %}
            <span class="pagination-btn pagination-next disabled">
                Next
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,6 15,12 9,18"/></svg>
            </span>
            {% endif %}
        </nav>
        {% endif %}
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <h2>Stay Updated</h2>
        <p>Get the latest automation insights delivered to your inbox.</p>
        <a href="{{ config.site.base_path }}/contact/" class="btn btn-white btn-lg">Subscribe</a>
    </div>
</section>
{% endblock %}

