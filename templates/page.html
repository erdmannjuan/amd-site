{% extends "base.html" %}

{% block content %}
<!-- Hero Section (if page has hero) -->
{% if page.hero %}
<section class="hero" {% if page.hero_image %}style="background-image: url('{{ config.site.base_path }}/static/images/{{ page.hero_image }}')"{% endif %}>
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">{{ page.hero_title or page.title }}</h1>
            {% if page.hero_subtitle %}
            <p class="hero-subtitle">{{ page.hero_subtitle }}</p>
            {% endif %}
            {% if page.hero_cta %}
            <a href="{{ page.hero_cta_url or '#contact' }}" class="btn btn-primary btn-lg">{{ page.hero_cta }}</a>
            {% endif %}
        </div>
    </div>
</section>
{% else %}
<!-- Page Hero -->
<section class="page-hero">
    <div class="container">
        <h1 class="page-title">{{ page.title }}</h1>
        {% if page.description %}
        <p class="page-subtitle">{{ page.description }}</p>
        {% endif %}
    </div>
</section>
{% endif %}

<!-- Page Content -->
<section class="section section-warm">
    <div class="container">
        {% if page.show_sidebar %}
        <div class="content-with-sidebar">
            <!-- Main Content Area -->
            <div class="content-main">
                <div class="content-body prose">
                    {{ content | safe }}
                </div>
            </div>

            <!-- Right Sidebar -->
            <aside class="content-sidebar">
                <div class="sidebar-inner">
                    <div class="sidebar-widget sidebar-cta">
                        <h3>Need Help?</h3>
                        <p>Our team is ready to discuss your automation project.</p>
                        <a href="{{ config.site.base_path }}/contact/" class="btn btn-primary btn-sm btn-block">Contact Us</a>
                        <p class="sidebar-phone">
                            <a href="tel:{{ config.social.phone | replace('(', '') | replace(')', '') | replace(' ', '') | replace('-', '') }}">
                                {{ config.social.phone }}
                            </a>
                        </p>
                    </div>

                    <div class="sidebar-widget">
                        <h3>Quick Links</h3>
                        <ul class="sidebar-nav">
                            <li><a href="{{ config.site.base_path }}/solutions/">Our Solutions</a></li>
                            <li><a href="{{ config.site.base_path }}/industries/">Industries</a></li>
                            <li><a href="{{ config.site.base_path }}/about/">About Us</a></li>
                            <li><a href="{{ config.site.base_path }}/blog/">Blog</a></li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
        {% else %}
        <div class="content-narrow">
            <div class="content-body prose">
                {{ content | safe }}
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Related Links Section (if any) -->
{% if page.related_pages %}
<section class="section section-alt related-content" data-test="related_content">
    <div class="container">
        <div class="section-header text-center">
            <span class="section-label">Related</span>
            <h2 class="section-title">Related Pages</h2>
        </div>
        <div class="related-grid">
            {% for related in page.related_pages %}
            <a href="{{ config.site.base_path }}{{ related.url }}" class="related-item" data-content-id="{{ related.title | lower | replace(' ', '-') }}">
                <div class="related-item-inner">
                    {% if related.image %}
                    <img src="{{ config.site.base_path }}/static/images/{{ related.image }}" alt="{{ related.title }}" loading="lazy" width="400" height="300">
                    {% endif %}
                    <h3>{{ related.title }}</h3>
                    <p>{{ related.excerpt }}</p>
                    <span class="related-link">Learn More â†’</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
{% if page.show_cta %}
<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <h2>{{ page.cta_title or "Ready to Get Started?" }}</h2>
            <p>{{ page.cta_text or "Contact us today for a free consultation about your automation project." }}</p>
            <div class="cta-buttons">
                <a href="{{ config.site.base_path }}/contact/" class="btn btn-white btn-lg">Contact Us</a>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}
