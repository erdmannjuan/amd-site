{% extends "base.html" %}

{% block head_extra %}
<!-- Preload LCP hero image for about page -->
<link rel="preload" href="/static/images/facility-hero-mobile.webp" as="image" type="image/webp" media="(max-width: 768px)" fetchpriority="high">
<link rel="preload" href="/static/images/facility-hero.webp" as="image" type="image/webp" media="(min-width: 769px)" fetchpriority="high">
{% endblock %}

{% block content %}
<!-- Hero with Facility Image -->
<section class="about-hero">
    <picture class="about-hero-bg-picture">
        <source srcset="/static/images/facility-hero-mobile.webp 800w, /static/images/facility-hero.webp 1920w" sizes="100vw" type="image/webp">
        <img src="/static/images/facility-hero.jpg" alt="" class="about-hero-bg-img" width="1920" height="888" fetchpriority="high" decoding="async">
    </picture>
    <div class="about-hero-overlay"></div>
    <div class="container">
        <div class="about-hero-content">
            <div class="about-hero-text">
                <span class="section-label section-label-light">{{ page.label or "About Us" }}</span>
                <h1 class="about-hero-title">{{ page.hero_title or "About AMD Machines" }}</h1>
                <p class="about-hero-subtitle">{{ page.hero_subtitle or "30+ years of engineering excellence in custom automation" }}</p>
            </div>
            <div class="about-hero-stats">
                {% for stat in config.stats %}
                <div class="about-hero-stat">
                    <div class="about-hero-stat-number">{{ stat.number }}</div>
                    <div class="about-hero-stat-label">{{ stat.label }}</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Story Timeline Section -->
{% if page.story_sections %}
<section class="section about-story-section">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Our Journey</span>
            <h2 class="section-title">The AMD Story</h2>
        </div>

        {% for story in page.story_sections %}
        <div class="story-block {% if loop.index is odd %}story-block-normal{% else %}story-block-reverse{% endif %} {% if loop.index == 3 %}story-block-tall{% endif %}">
            <div class="story-image {% if loop.index == 3 %}story-image-tall{% endif %}">
                <picture>
                    <source srcset="{{ story.image | replace('.jpeg', '.webp') }}" type="image/webp">
                    <img src="{{ story.image }}" alt="{{ story.image_alt }}" loading="{% if loop.index == 1 %}eager{% else %}lazy{% endif %}" decoding="async" width="900" height="450">
                </picture>
                <span class="story-caption">{{ story.caption }}</span>
            </div>
            <div class="story-content">
                <h3 class="story-title">{{ story.title }}</h3>
                <p class="story-text">{{ story.content }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Facilities Section -->
{% if page.facilities_content %}
<section class="section section-alt">
    <div class="container">
        <div class="facilities-block">
            <div class="facilities-content">
                <span class="section-label">Our Facilities</span>
                <h2>World-Class Manufacturing Capabilities</h2>
                <p>{{ page.facilities_content }}</p>
            </div>
            {% if page.approach %}
            <div class="approach-grid">
                {% for item in page.approach %}
                <div class="approach-item">
                    <div class="approach-icon">
                        {% if loop.index == 1 %}
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                        {% elif loop.index == 2 %}
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        {% elif loop.index == 3 %}
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><polyline points="9 12 11 14 15 10"/></svg>
                        {% else %}
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>
                        {% endif %}
                    </div>
                    <div class="approach-text">
                        <strong>{{ item.title }}</strong>
                        <span>{{ item.description }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- Values Section -->
{% if page.company_values %}
<section class="section">
    <div class="container">
        <div class="section-header">
            <span class="section-label">What Drives Us</span>
            <h2 class="section-title">Our Values</h2>
        </div>
        <div class="values-grid">
            {% for value in page.company_values %}
            <div class="value-card">
                <div class="value-icon">
                    {% if loop.index == 1 %}
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                    {% elif loop.index == 2 %}
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    {% elif loop.index == 3 %}
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><polyline points="9 12 11 14 15 10"/></svg>
                    {% else %}
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="7.5 4.21 12 6.81 16.5 4.21"/><polyline points="7.5 19.79 7.5 14.6 3 12"/><polyline points="21 12 16.5 14.6 16.5 19.79"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
                    {% endif %}
                </div>
                <h3>{{ value.title }}</h3>
                <p>{{ value.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Certifications -->
{% if page.certifications %}
<section class="section section-alt">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Partnerships</span>
            <h2 class="section-title">Certifications & Partners</h2>
        </div>
        <div class="certifications-grid">
            {% for cert in page.certifications %}
            <div class="certification-badge">{{ cert }}</div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="cta-section cta-accent">
    <div class="container">
        <h2>Ready to Work Together?</h2>
        <p>Let's discuss how AMD Machines can help solve your manufacturing challenges.</p>
        <a href="{{ config.site.base_path }}/contact/" class="btn btn-white btn-lg">Contact Us</a>
    </div>
</section>
{% endblock %}
